<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

  <title>KPCC Reader</title>

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" href="http://media.scpr.org/favicon.ico" />
</head>

<body>

  <!-- APPLICATION LAYOUT -->
  <script type="text/x-handlebars">
    <div class="navbar">
      <a class="navbar-brand" href="#">KPCC Reader</a>
    </div>

    <div class="container">
      {{outlet}}
    </div>
  </script>


  <!-- ARTICLES.INDEX -->
  <script type="text/x-handlebars" id="articles">
    {{#each controller itemController='article'}}
      <article class='compact'>
        <figure class="img-wrapper" {{bindAttr style="imgWrapperStyle"}}>
          {{#linkTo 'article' this}}
            {{asset "small" this}}
          {{/linkTo}}

          {{#if category}}
          <div class="category">
              {{category.title}}
          </div>
          {{/if}}

        </figure>

        <time>{{relativeDate published_at}}</time>

        <h4>{{#linkTo 'article' this}}{{short_title}}{{/linkTo}}</h4>
        <p>{{{teaser}}}</p>
        {{#linkTo 'article' this classNames="link-follow"}}Read More...{{/linkTo}}

        <footer>
        </footer>
      </article>
    {{/each}}
  </script>


  <!-- ARTICLES.SHOW -->
  <script type="text/x-handlebars" id="article">
    <article class="full">
      <header>
        <h2>{{#linkTo 'article' this}}{{title}}{{/linkTo}}</h2>
        <h4>
          {{byline}} <time>{{date published_at}}</time>

          {{#if category}}
            <a href="{{unbound category.public_url}}">{{category.title}}</a>
          {{/if}}
        </h4>

      </header>

      {{asset "small" this}}

      {{{body}}}

      <footer>
        <a {{bindAttr href="public_url"}}>View on KPCC.org</a>
      </footer>
    </article>
  </script>



  <!-- CORE -->
  <script src="js/libs/jquery.min.js"></script>
  <script src="js/libs/handlebars.min.js"></script>
  <script src="js/libs/moment.min.js"></script>
  <script src="js/libs/ember.min.js?bust=1"></script>
  <script src="js/libs/ember-data.min.js"></script>

  <!-- DEVELOPMENT ONLY
  <script src="js/libs/development/ember.js"></script>
  <script src="js/libs/development/ember-data.js"></script>
  -->

  <!-- APP -->
  <script src="js/kpcc.js"></script>
  <script src="js/router.js"></script>
  <script src="js/helpers.js"></script>

  <!-- MIXINS -->

  <!-- MODELS -->
  <script src="js/models/article.js"></script>
  <script src="js/models/category.js"></script>
  <script src="js/models/asset.js"></script>

  <!-- ASSETS -->
  <script src="js/models/asset_size.js"></script>
  <script src="js/models/asset_sizes/thumbnail.js"></script>
  <script src="js/models/asset_sizes/small.js"></script>
  <script src="js/models/asset_sizes/large.js"></script>
  <script src="js/models/asset_sizes/full.js"></script>

  <!-- CONTROLLERS -->
  <script src="js/controllers/articles_controller.js"></script>
  <script src="js/controllers/article_controller.js"></script>

  <!-- VIEWS -->
  <script src="js/views/articles_view.js"></script>
  <script src="js/views/article_view.js"></script>
</body>
</html>
